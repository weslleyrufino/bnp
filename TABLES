CREATE DATABASE BNP

USE BNP;

CREATE TABLE PRODUTO(
	COD_PRODUTO			CHAR(4)		NOT NULL,
	DES_PRODUTO			VARCHAR(30) NULL,
	STA_STATUS			CHAR(1)		NULL,
	CONSTRAINT PK_COD_PRODUTO PRIMARY KEY (COD_PRODUTO)
)

CREATE TABLE PRODUTO_COSIF(
	COD_PRODUTO			CHAR(4)		NOT NULL,
	COD_COSIF			CHAR(11)	NOT NULL,                          
	COD_CLASSIFICACAO	CHAR(6)		NULL,        
	STA_STATUS			CHAR(1)		NULL,
	CONSTRAINT PK_COD_COSIF PRIMARY KEY (COD_COSIF),
	CONSTRAINT FK_COD_PRODUTO FOREIGN KEY (COD_PRODUTO)	REFERENCES PRODUTO(COD_PRODUTO)
)

CREATE TABLE MOVIMENTO_MANUAL(
	DAT_MES			NUMERIC       	NOT NULL,
    DAT_ANO			NUMERIC       	NOT NULL,
	NUM_LANCAMENTO	NUMERIC(18)   	NOT NULL identity,
	COD_PRODUTO		CHAR(4)      	NOT NULL,
	COD_COSIF		CHAR(11)     	NOT NULL,
	VAL_VALOR		DECIMAL(18,2) 	NOT NULL,
	DES_DESCRICAO	VARCHAR(50)  	NOT NULL,
	DAT_MOVIMENTO	SMALLDATETIME	NOT NULL,
	COD_USUARIO		VARCHAR(15)  	NOT NULL,
	CONSTRAINT PK_MOVIMENTO_MANUAL PRIMARY KEY(DAT_MES, DAT_ANO, NUM_LANCAMENTO),
	CONSTRAINT FK_PRODUTO_COSIF	FOREIGN KEY (COD_PRODUTO) REFERENCES PRODUTO(COD_PRODUTO),
	CONSTRAINT FK_PRODUTO_COSIFABC	FOREIGN KEY (COD_COSIF) REFERENCES PRODUTO_COSIF(COD_COSIF)
)

INSERT INTO PRODUTO VALUES (1, 'Desc Produto 1', 'A')
INSERT INTO PRODUTO VALUES (2, 'Desc Produto 2', 'I')
INSERT INTO PRODUTO VALUES (3, 'Desc Produto 3', 'I')


INSERT INTO PRODUTO_COSIF VALUES (1, 1, 'Normal', 'A')
INSERT INTO PRODUTO_COSIF VALUES (1, 2, 'Normal', 'I')
INSERT INTO PRODUTO_COSIF VALUES (1, 3, 'MTM',	'A')
INSERT INTO PRODUTO_COSIF VALUES (2, 4, 'MTM',	'I')
INSERT INTO PRODUTO_COSIF VALUES (3, 5, 'Normal', 'A')



INSERT INTO MOVIMENTO_MANUAL (DAT_MES, DAT_ANO, COD_PRODUTO, COD_COSIF, VAL_VALOR, DES_DESCRICAO, DAT_MOVIMENTO, COD_USUARIO) VALUES (06, 2002, 1, 1, 150.00, 'Lorem ipsum 1', GETDATE(), 'TESTE')
INSERT INTO MOVIMENTO_MANUAL (DAT_MES, DAT_ANO, COD_PRODUTO, COD_COSIF, VAL_VALOR, DES_DESCRICAO, DAT_MOVIMENTO, COD_USUARIO) VALUES (03, 2020, 1, 2, 280.00, 'Lorem ipsum 2', GETDATE(), 'TESTE')
INSERT INTO MOVIMENTO_MANUAL (DAT_MES, DAT_ANO, COD_PRODUTO, COD_COSIF, VAL_VALOR, DES_DESCRICAO, DAT_MOVIMENTO, COD_USUARIO) VALUES (01, 2018, 2, 4, 500.00, 'Lorem ipsum 3', GETDATE(), 'TESTE')
INSERT INTO MOVIMENTO_MANUAL (DAT_MES, DAT_ANO, COD_PRODUTO, COD_COSIF, VAL_VALOR, DES_DESCRICAO, DAT_MOVIMENTO, COD_USUARIO) VALUES (10, 2018, 1, 3, 800.00, 'Lorem ipsum 4', GETDATE(), 'TESTE')
INSERT INTO MOVIMENTO_MANUAL (DAT_MES, DAT_ANO, COD_PRODUTO, COD_COSIF, VAL_VALOR, DES_DESCRICAO, DAT_MOVIMENTO, COD_USUARIO) VALUES (10, 2018, 1, 3, 800.00, 'Lorem ipsum 5', GETDATE(), 'TESTE')
INSERT INTO MOVIMENTO_MANUAL (DAT_MES, DAT_ANO, COD_PRODUTO, COD_COSIF, VAL_VALOR, DES_DESCRICAO, DAT_MOVIMENTO, COD_USUARIO) VALUES (05, 2020, 2, 4, 1600.00, 'Lorem ipsum 6', GETDATE(), 'TESTE')
INSERT INTO MOVIMENTO_MANUAL (DAT_MES, DAT_ANO, COD_PRODUTO, COD_COSIF, VAL_VALOR, DES_DESCRICAO, DAT_MOVIMENTO, COD_USUARIO) VALUES (01, 2015, 2, 4, 30.00, 'Lorem ipsum 7', GETDATE(), 'TESTE')
INSERT INTO MOVIMENTO_MANUAL (DAT_MES, DAT_ANO, COD_PRODUTO, COD_COSIF, VAL_VALOR, DES_DESCRICAO, DAT_MOVIMENTO, COD_USUARIO) VALUES (04, 2020, 2, 4, 120.00, 'Lorem ipsum 8', GETDATE(), 'TESTE')
INSERT INTO MOVIMENTO_MANUAL (DAT_MES, DAT_ANO, COD_PRODUTO, COD_COSIF, VAL_VALOR, DES_DESCRICAO, DAT_MOVIMENTO, COD_USUARIO) VALUES (01, 2020, 2, 4, 50.00, 'Lorem ipsum 9', GETDATE(), 'TESTE')
INSERT INTO MOVIMENTO_MANUAL (DAT_MES, DAT_ANO, COD_PRODUTO, COD_COSIF, VAL_VALOR, DES_DESCRICAO, DAT_MOVIMENTO, COD_USUARIO) VALUES (05, 2020, 2, 4, 90.00, 'Lorem ipsum 10', GETDATE(), 'TESTE')
